#!groovy
//noinspection GroovyUnusedAssignment
@Library("Infrastructure") _

def product = "pip"

def setupTerraformSecret() {
  azureKeyVault(
    keyVaultURL: "https://pip-bootstrap-${env.ENV}-kv.vault.azure.net/",
    secrets: [
      secret('otp-client-secret', 'OTP_CLIENT_SECRET')
    ]) {
    env.TF_VAR_OTP_CLIENT_SECRET = "${OTP_CLIENT_SECRET}"
  }
}

withInfraPipeline(product) {

setupTerraformSecret()

}